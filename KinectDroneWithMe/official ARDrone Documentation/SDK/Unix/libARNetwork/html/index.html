<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>libARNetwork: libARNetwork Documentation</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">libARNetwork
   &#160;<span id="projectnumber">1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('index.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">libARNetwork Documentation </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="NET_intro_sec"></a>
Introduction</h1>
<p>The ARNetwork library provides a simple way to send and receive data over a network. The ARNetwork library uses the ARNetworkAL library as its network abstraction layer.</p>
<p>The library uses <a class="el" href="ARNETWORK__Manager_8h.html#a3cd7bd69cd0a9bc49ad5422887f3dc5a">ARNETWORK_Manager_t</a> object as its main entry point</p>
<h1><a class="anchor" id="NET_flow_sec"></a>
ARNetwork usage</h1>
<p>The typical use flow of the ARNetwork library is the following:</p>
<h2><a class="anchor" id="NET_arnetal_subsec"></a>
1&gt; Provide an initialized ARNetworkAL instance</h2>
<p>Before actually creating the <a class="el" href="ARNETWORK__Manager_8h.html#a3cd7bd69cd0a9bc49ad5422887f3dc5a">ARNETWORK_Manager_t</a>, the application must create and initialize an <a class="elRef" doxygen="/Users/d.bertrand/Documents/SDKGerritCompiled/ARSDKBuildUtils/Targets/Unix/Build/Doc/libARNetworkAL/libARNetworkAL.tag:../../libARNetworkAL/html/" href="../../libARNetworkAL/html/structARNETWORKAL__Manager__t.html">ARNETWORKAL_Manager_t</a>.</p>
<dl class="section note"><dt>Note</dt><dd>Providing an uninitialized <a class="elRef" doxygen="/Users/d.bertrand/Documents/SDKGerritCompiled/ARSDKBuildUtils/Targets/Unix/Build/Doc/libARNetworkAL/libARNetworkAL.tag:../../libARNetworkAL/html/" href="../../libARNetworkAL/html/structARNETWORKAL__Manager__t.html">ARNETWORKAL_Manager_t</a>, which will be initialized by the application BEFORE the ARNetwork threads are started will also work, but is not the advised behavior.</dd></dl>
<dl class="section see"><dt>See Also</dt><dd><a href="../../libARNetworkAL/html/index.html" target="_blank">ARNetworkAL Documentation</a></dd></dl>
<h2><a class="anchor" id="NET_iobuffers_subsec"></a>
2&gt; Create the list of inputs/outputs</h2>
<p>Ths list of inputs and outputs of the <a class="el" href="ARNETWORK__Manager_8h.html#a3cd7bd69cd0a9bc49ad5422887f3dc5a">ARNETWORK_Manager_t</a> are provided through two arrays of <a class="el" href="structARNETWORK__IOBufferParam__t.html">ARNETWORK_IOBufferParam_t</a>.</p>
<p>Each <a class="el" href="structARNETWORK__IOBufferParam__t.html">ARNETWORK_IOBufferParam_t</a> represent an input or output buffer, with its specific settings</p>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="ARNETWORK__IOBufferParam_8h.html">ARNETWORK_IOBufferParam.h</a></dd></dl>
<h2><a class="anchor" id="NET_create_subsec"></a>
3&gt; Create the manager</h2>
<p>The <a class="el" href="ARNETWORK__Manager_8h.html#a3cd7bd69cd0a9bc49ad5422887f3dc5a">ARNETWORK_Manager_t</a> can now be properly created, using the <a class="el" href="ARNETWORK__Manager_8h.html#a50a86539c55dbf2a54f0e22baccdf578">ARNETWORK_Manager_New</a> function.</p>
<h2><a class="anchor" id="NET_start_th_subsec"></a>
4&gt; Start the managers threads</h2>
<p>The <a class="el" href="ARNETWORK__Manager_8h.html#a3cd7bd69cd0a9bc49ad5422887f3dc5a">ARNETWORK_Manager_t</a> uses two internal threads to perform the network operations. The application can use any threading framework to launch the internal threads, but in any case each one must be started once and only once.</p>
<p>The threads entry point are <a class="el" href="ARNETWORK__Manager_8h.html#a38d277285c0fed3eb0b066c4cc441616">ARNETWORK_Manager_SendingThreadRun</a> and <a class="el" href="ARNETWORK__Manager_8h.html#a8e4eb73c36998e8616acbb9b1b6351de">ARNETWORK_Manager_ReceivingThreadRun</a>.</p>
<p>If your application does not require any special threading framework, it can use the libARSAL Thread module.</p>
<dl class="section note"><dt>Note</dt><dd>To ease the closing process, the threads should not be created in detached mode.</dd></dl>
<h2><a class="anchor" id="NET_use_subsec"></a>
5&gt; Use the manager</h2>
<p>At this point the <a class="el" href="ARNETWORK__Manager_8h.html#a3cd7bd69cd0a9bc49ad5422887f3dc5a">ARNETWORK_Manager_t</a> is ready for use. All send and read functions are thread safe, so multiple threads can use the <a class="el" href="ARNETWORK__Manager_8h.html#a3cd7bd69cd0a9bc49ad5422887f3dc5a">ARNETWORK_Manager_t</a> at the same time without any external synchronization procedures.</p>
<h3><a class="anchor" id="NET_send_subsubsec"></a>
Send data</h3>
<p>To send data, the application will use the <a class="el" href="ARNETWORK__Manager_8h.html#ace22ddaf5de87a707afbf773e754772c">ARNETWORK_Manager_SendData</a> function. This function will queue the data into the <a class="el" href="ARNETWORK__Manager_8h.html#a3cd7bd69cd0a9bc49ad5422887f3dc5a">ARNETWORK_Manager_t</a> internal buffers. The <a class="el" href="ARNETWORK__Manager_8h.html#ae4cf361b2dbe81bcb26d3e96ea9c128a">ARNETWORK_Manager_Callback_t</a> will be called multiple times during the processing of the data. </p>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="ARNETWORK__Manager_8h.html#afd73389d6fdbaa8b27b3a6553f0d8493">eARNETWORK_MANAGER_CALLBACK_STATUS</a> : Status code for callback calls</dd></dl>
<p>The <a class="el" href="ARNETWORK__Manager_8h.html#ace22ddaf5de87a707afbf773e754772c">ARNETWORK_Manager_SendData</a> function can either copy the data into internal buffers (thus leaving the data pointer free for reuse), or use a 'no copy' policy, in which case it will only keep the pointer and its size (so the data will only be copied in the acutal network buffers).</p>
<h3><a class="anchor" id="NET_read_subsubsec"></a>
Read data</h3>
<p>Three read functions are available for an <a class="el" href="ARNETWORK__Manager_8h.html#a3cd7bd69cd0a9bc49ad5422887f3dc5a">ARNETWORK_Manager_t</a>.</p>
<p>The simple one is <a class="el" href="ARNETWORK__Manager_8h.html#aa96fd246308dd5f5cb08b762080ff5c6">ARNETWORK_Manager_ReadData</a>. This is a blocking function, which will not return until a data is actually read. Typical applications should not use this function.</p>
<p>The most common function is <a class="el" href="ARNETWORK__Manager_8h.html#a7bafbab104b1e8612fb421e9ca1dddd8">ARNETWORK_Manager_ReadDataWithTimeout</a>. This is a 'with timeout' version of the previous function, and should work for most uses where each output buffer has one dedicated thread for reading</p>
<ul>
<li>processing.</li>
</ul>
<p>The third function is <a class="el" href="ARNETWORK__Manager_8h.html#a02ca8da6f65ca2842612e15a305fc33f">ARNETWORK_Manager_TryReadData</a>. This function is somehow equivalent of <a class="el" href="ARNETWORK__Manager_8h.html#a7bafbab104b1e8612fb421e9ca1dddd8">ARNETWORK_Manager_ReadDataWithTimeout</a> with a zero timeout. This function is useful if a thread reads from multiple output buffers, but lacks the clocking feature (i.e. thread is waiting on an internal semaphore) of the previous one.</p>
<h2><a class="anchor" id="NET_stop_th_subsec"></a>
6&gt; Stop the managers threads</h2>
<p>To stop the <a class="el" href="ARNETWORK__Manager_8h.html#a3cd7bd69cd0a9bc49ad5422887f3dc5a">ARNETWORK_Manager_t</a> threads, use the <a class="el" href="ARNETWORK__Manager_8h.html#affe3126b6c6bbeb903b62f01a31995ac">ARNETWORK_Manager_Stop</a> function. This function causes the threads to return as soon as possible. Thread returns may be delayed by ARNetworkAL calls for a time up to the network timeout (typically 3 seconds).</p>
<p>To ensure that the threads are correctly stopped, the application should join them (any order works).</p>
<h2><a class="anchor" id="NET_clean_sec"></a>
7&gt; Close the manager</h2>
<p>The <a class="el" href="ARNETWORK__Manager_8h.html#a3cd7bd69cd0a9bc49ad5422887f3dc5a">ARNETWORK_Manager_t</a> object can the be destroyed using <a class="el" href="ARNETWORK__Manager_8h.html#a60c710d54c7b882a66f00ad020ba8b07">ARNETWORK_Manager_Delete</a> function.</p>
<p>This call is mandatory, as it reclaims all allocated memory.</p>
<h1><a class="anchor" id="NET_util_sec"></a>
Utility functions</h1>
<p>The API also provides some utility functions.</p>
<h2><a class="anchor" id="NET_flush_subsec"></a>
Flush functions</h2>
<p>The <a class="el" href="ARNETWORK__Manager_8h.html#a080e9981c8891fabe0afbabecd950fe9">ARNETWORK_Manager_Flush</a> funtion will flush all the <a class="el" href="ARNETWORK__Manager_8h.html#a3cd7bd69cd0a9bc49ad5422887f3dc5a">ARNETWORK_Manager_t</a> buffers.</p>
<p>The <a class="el" href="ARNETWORK__Manager_8h.html#ac0cc32355f8df68227fe58d98428fb76">ARNETWORK_Manager_FlushInputBuffer</a> and <a class="el" href="ARNETWORK__Manager_8h.html#a8767b29d8adb5a76c0e2a072ea8fd925">ARNETWORK_Manager_FlushOutputBuffer</a> functions are used to flush a single specific buffer.</p>
<h2><a class="anchor" id="NET_latency_subsec"></a>
Latency estimation</h2>
<p>If the ping was not disabled during the <a class="el" href="ARNETWORK__Manager_8h.html#a3cd7bd69cd0a9bc49ad5422887f3dc5a">ARNETWORK_Manager_t</a> creation, a coarse latency estimation will be available using <a class="el" href="ARNETWORK__Manager_8h.html#a4fe209e3978a247f02ebf23c8f00be6c">ARNETWORK_Manager_GetEstimatedLatency</a>. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Thu Aug 6 2015 16:14:31 for libARNetwork by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
